"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _enzyme = require("enzyme");

var _index = _interopRequireDefault(require("../index"));

var options = [{
  value: 'admin',
  label: 'Admin',
  disabled: true
}, {
  value: 'user',
  label: 'User'
}, {
  value: 'anonymous',
  label: 'Anonymous'
}];
describe('<RadioButtonGroup />', function () {
  it('should have the right class names when an error is passed', function () {
    var component = (0, _enzyme.mount)(_react["default"].createElement(_index["default"], {
      error: "input error"
    }));
    expect(component.find('fieldset').prop('className')).toBe('rainbow-radio-button-group_container rainbow-radio-button-group--error');
  });
  it('should have the right class names when a custom class is passed', function () {
    var component = (0, _enzyme.mount)(_react["default"].createElement(_index["default"], {
      className: "my-custom-class"
    }));
    expect(component.find('fieldset').prop('className')).toBe('rainbow-radio-button-group_container my-custom-class');
  });
  it('should set isVisible to true in Marker when there is an option selected initially', function () {
    var component = (0, _enzyme.mount)(_react["default"].createElement(_index["default"], {
      options: options,
      value: "user"
    }));
    expect(component.find('Marker').prop('isVisible')).toBe(true);
  });
  it('should set isVisible to false in Marker when there is a disabled option selected initially', function () {
    var component = (0, _enzyme.mount)(_react["default"].createElement(_index["default"], {
      options: options,
      value: "admin"
    }));
    expect(component.find('Marker').prop('isVisible')).toBe(false);
  });
  it('should set isVisible to false in Marker when there is an invalid option selected initially', function () {
    var component = (0, _enzyme.mount)(_react["default"].createElement(_index["default"], {
      options: options,
      value: "apple juice"
    }));
    expect(component.find('Marker').prop('isVisible')).toBe(false);
  });
  it('should pass the right styles to Marker when there is an option selected', function () {
    var getCheckedOptionRefMock = jest.fn(function () {
      return {
        current: {
          offsetLeft: 10,
          offsetWidth: 100,
          clientWidth: 80
        }
      };
    });
    var component = (0, _enzyme.shallow)(_react["default"].createElement(_index["default"], {
      options: options,
      value: "user"
    })).dive();
    var instance = component.instance();
    instance.getCheckedOptionRef = getCheckedOptionRefMock;
    var currentMarkerStyle = {
      left: 10,
      width: 100
    };
    instance.updateMarker();
    expect(component.find('Marker').prop('style')).toEqual(currentMarkerStyle);
  });
  it('should set isVisible to true in Marker when selecting an option', function () {
    var component;
    var onChangeFn = jest.fn(function () {
      component.setProps({
        value: 'anonymous'
      });
      component.update();
    });
    component = (0, _enzyme.mount)(_react["default"].createElement(_index["default"], {
      options: options,
      onChange: onChangeFn
    }));
    expect(component.find('Marker').prop('isVisible')).toBe(false);
    var radio = component.find('RadioButton').at(2).find('input');
    radio.simulate('change');
    expect(onChangeFn).toHaveBeenCalled();
    expect(component.find('Marker').prop('isVisible')).toBe(true);
  });
});